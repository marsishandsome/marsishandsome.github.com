<!DOCTYPE html>
<!--
  Copyright 2010 Google Inc.

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.

  Original slides: Marcin Wichary (mwichary@google.com)
  Modifications: Ernest Delgado (ernestd@google.com)
                 Alex Russell (slightlyoff@chromium.org)

  landslide modifications: Adam Zapletal (adamzap@gmail.com)
                           Nicolas Perriault (nperriault@gmail.com)
-->
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Hadoop Security (Kerberos)</title>
    <!-- Styles -->
    
    <link rel="stylesheet" media="print" href="file://c:\Python34\lib\site-packages\landslide-1.1.3-py3.4.egg\landslide\themes\default\css\print.css">
    <link rel="stylesheet" media="screen, projection" href="file://c:\Python34\lib\site-packages\landslide-1.1.3-py3.4.egg\landslide\themes\default\css\screen.css">
    
    
    <!-- /Styles -->
    <!-- Javascripts -->
    
    <script type="text/javascript" src="file://c:\Python34\lib\site-packages\landslide-1.1.3-py3.4.egg\landslide\themes\default\js\slides.js"></script>
    
    
    
    <!-- /Javascripts -->
</head>
<body>
  <div id="blank"></div>
  <div class="presentation">
    <div id="current_presenter_notes">
      <div id="presenter_note"></div>
    </div>
    <div class="slides">
      
      <!-- slide source: src/slides/Spark/Hadoop_Security.md -->
      <div class="slide-wrapper">
        <div class="slide slide-1">
          <div class="inner">
            
            <header><h1>Hadoop Security (Kerberos)</h1></header>
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="src/slides/Spark/Hadoop_Security.md">src/slides/Spark/Hadoop_Security.md</a>
            </aside>
            
            <aside class="page_number">
              1/18
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: src/slides/Spark/Hadoop_Security.md -->
      <div class="slide-wrapper">
        <div class="slide slide-2">
          <div class="inner">
            
            <header><h1>Hadoop Security (Kerberos)</h1></header>
            
            
            <section><ul>
<li>Kerberos</li>
<li>Hadoop HDFS Security</li>
<li>Spark Security</li>
<li>Hadoop Security Programming API</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="src/slides/Spark/Hadoop_Security.md">src/slides/Spark/Hadoop_Security.md</a>
            </aside>
            
            <aside class="page_number">
              2/18
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: src/slides/Spark/Hadoop_Security.md -->
      <div class="slide-wrapper">
        <div class="slide slide-3">
          <div class="inner">
            
            <header><h1>Kerberos</h1></header>
            
            
            <section><p><img alt="" src="http://g.hiphotos.baidu.com/baike/c0%3Dbaike92%2C5%2C5%2C92%2C30/sign=0f03a3c4a344ad343ab28fd5b1cb6791/a5c27d1ed21b0ef485f59977dfc451da81cb3efd.jpg" /></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="src/slides/Spark/Hadoop_Security.md">src/slides/Spark/Hadoop_Security.md</a>
            </aside>
            
            <aside class="page_number">
              3/18
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: src/slides/Spark/Hadoop_Security.md -->
      <div class="slide-wrapper">
        <div class="slide slide-4">
          <div class="inner">
            
            <header><h1>Kerberos: The Network Authentication Protocol</h1></header>
            
            
            <section><ul>
<li><a href="http://www.kerberos.org/software/adminkerberos.pdf">The MIT Kerberos Administrator’s How-to Guide</a></li>
</ul>
<p><img alt="" src="https://upload.wikimedia.org/wikipedia/commons/thumb/4/4e/Kerberos.svg/440px-Kerberos.svg.png" /></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="src/slides/Spark/Hadoop_Security.md">src/slides/Spark/Hadoop_Security.md</a>
            </aside>
            
            <aside class="page_number">
              4/18
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: src/slides/Spark/Hadoop_Security.md -->
      <div class="slide-wrapper">
        <div class="slide slide-5">
          <div class="inner">
            
            
            <section><p><img alt="" src="file://e:\Workspace\marsishandsome.github.com\src\slides\Spark\../../../images/kerberos/kerberos1.PNG" /></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="src/slides/Spark/Hadoop_Security.md">src/slides/Spark/Hadoop_Security.md</a>
            </aside>
            
            <aside class="page_number">
              5/18
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: src/slides/Spark/Hadoop_Security.md -->
      <div class="slide-wrapper">
        <div class="slide slide-6">
          <div class="inner">
            
            <header><h1>Step 1: TGT Delivery</h1></header>
            
            
            <section><p><img alt="" src="file://e:\Workspace\marsishandsome.github.com\src\slides\Spark\../../../images/kerberos/kerberos2.PNG" /></p>
<h1>Step 2: TGS Delivery</h1></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="src/slides/Spark/Hadoop_Security.md">src/slides/Spark/Hadoop_Security.md</a>
            </aside>
            
            <aside class="page_number">
              6/18
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: src/slides/Spark/Hadoop_Security.md -->
      <div class="slide-wrapper">
        <div class="slide slide-7">
          <div class="inner">
            
            
            <section><p><img alt="" src="file://e:\Workspace\marsishandsome.github.com\src\slides\Spark\../../../images/kerberos/kerberos3.PNG" /></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="src/slides/Spark/Hadoop_Security.md">src/slides/Spark/Hadoop_Security.md</a>
            </aside>
            
            <aside class="page_number">
              7/18
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: src/slides/Spark/Hadoop_Security.md -->
      <div class="slide-wrapper">
        <div class="slide slide-8">
          <div class="inner">
            
            
            <section><p><img alt="" src="file://e:\Workspace\marsishandsome.github.com\src\slides\Spark\../../../images/kerberos/kerberos4.PNG" /></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="src/slides/Spark/Hadoop_Security.md">src/slides/Spark/Hadoop_Security.md</a>
            </aside>
            
            <aside class="page_number">
              8/18
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: src/slides/Spark/Hadoop_Security.md -->
      <div class="slide-wrapper">
        <div class="slide slide-9">
          <div class="inner">
            
            <header><h1>Hadoop HDFS Security</h1></header>
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="src/slides/Spark/Hadoop_Security.md">src/slides/Spark/Hadoop_Security.md</a>
            </aside>
            
            <aside class="page_number">
              9/18
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: src/slides/Spark/Hadoop_Security.md -->
      <div class="slide-wrapper">
        <div class="slide slide-10">
          <div class="inner">
            
            <header><h1>Hadoop</h1></header>
            
            
            <section><ul>
<li><a href="http://www.valleytalk.org/wp-content/uploads/2013/03/hadoop-security-design.pdf">Hadoop Security Design</a></li>
</ul>
<p><img alt="" src="file://e:\Workspace\marsishandsome.github.com\src\slides\Spark\../../../images/kerberos/hadoop.PNG" /></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="src/slides/Spark/Hadoop_Security.md">src/slides/Spark/Hadoop_Security.md</a>
            </aside>
            
            <aside class="page_number">
              10/18
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: src/slides/Spark/Hadoop_Security.md -->
      <div class="slide-wrapper">
        <div class="slide slide-11">
          <div class="inner">
            
            <header><h1>HDFS Delegation Token</h1></header>
            
            
            <section><ul>
<li>TokenID = {ownerID, renewerID, issueDate, maxDate, sequenceNumber}</li>
<li>TokenAuthenticator = HMAC-SHA1(masterKey, TokenID)</li>
<li>Delegation Token = {TokenID, TokenAuthenticator}</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="src/slides/Spark/Hadoop_Security.md">src/slides/Spark/Hadoop_Security.md</a>
            </aside>
            
            <aside class="page_number">
              11/18
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: src/slides/Spark/Hadoop_Security.md -->
      <div class="slide-wrapper">
        <div class="slide slide-12">
          <div class="inner">
            
            <header><h1>Block Access Token</h1></header>
            
            
            <section><ul>
<li>TokenID = {expirationDate, keyID, ownerID, blockID, accessModes}</li>
<li>TokenAuthenticator = HMAC-SHA1(key, TokenID)</li>
<li>Block Access Token = {TokenID, TokenAuthenticator}</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="src/slides/Spark/Hadoop_Security.md">src/slides/Spark/Hadoop_Security.md</a>
            </aside>
            
            <aside class="page_number">
              12/18
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: src/slides/Spark/Hadoop_Security.md -->
      <div class="slide-wrapper">
        <div class="slide slide-13">
          <div class="inner">
            
            <header><h1>Spark Security</h1></header>
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="src/slides/Spark/Hadoop_Security.md">src/slides/Spark/Hadoop_Security.md</a>
            </aside>
            
            <aside class="page_number">
              13/18
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: src/slides/Spark/Hadoop_Security.md -->
      <div class="slide-wrapper">
        <div class="slide slide-14">
          <div class="inner">
            
            <header><h1>Spark Security (Old Design)</h1></header>
            
            
            <section><p><img alt="" src="file://e:\Workspace\marsishandsome.github.com\src\slides\Spark\../../../images/kerberos/spark1.PNG" /></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="src/slides/Spark/Hadoop_Security.md">src/slides/Spark/Hadoop_Security.md</a>
            </aside>
            
            <aside class="page_number">
              14/18
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: src/slides/Spark/Hadoop_Security.md -->
      <div class="slide-wrapper">
        <div class="slide slide-15">
          <div class="inner">
            
            <header><h1>Spark Security (New Design)</h1></header>
            
            
            <section><ul>
<li><a href="https://issues.apache.org/jira/secure/attachment/12693526/SparkYARN.pdf">Long Running Spark Apps on Secure YARN</a></li>
</ul>
<p><img alt="" src="file://e:\Workspace\marsishandsome.github.com\src\slides\Spark\../../../images/kerberos/spark2.PNG" /></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="src/slides/Spark/Hadoop_Security.md">src/slides/Spark/Hadoop_Security.md</a>
            </aside>
            
            <aside class="page_number">
              15/18
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: src/slides/Spark/Hadoop_Security.md -->
      <div class="slide-wrapper">
        <div class="slide slide-16">
          <div class="inner">
            
            <header><h1>Related Patches</h1></header>
            
            
            <section><h3>Allow Long Running Spark Apps</h3>
<ul>
<li>Spark-1.4.0: <a href="https://issues.apache.org/jira/browse/SPARK-5342">Spark-5342 Allow long running Spark apps to run on secure YARN/HDFS</a></li>
<li>Spark-1.4.0: <a href="https://issues.apache.org/jira/browse/SPARK-6918">SPARK-6918 Secure HBase with Kerberos does not work over YARN</a></li>
<li>Spark-1.5.0: <a href="https://issues.apache.org/jira/browse/SPARK-8688">Spark-8688 Hadoop Configuration has to disable client cache when writing or reading delegation tokens</a></li>
<li>Spark-1.5.0: <a href="https://issues.apache.org/jira/browse/SPARK-7524">Spark-7524 add configs for keytab and principal, move originals to internal</a></li>
</ul>
<h3>Patch</h3>
<ul>
<li><a href="https://issues.apache.org/jira/browse/SPARK-11182">Spark-11182 HDFS Delegation Token will be expired when calling "UserGroupInformation.getCurrentUser.addCredentials" in HA mode</a></li>
<li><a href="https://issues.apache.org/jira/browse/HDFS-9276">HDFS-9276 Failed to Update HDFS Delegation Token for long running application in HA mode</a></li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="src/slides/Spark/Hadoop_Security.md">src/slides/Spark/Hadoop_Security.md</a>
            </aside>
            
            <aside class="page_number">
              16/18
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: src/slides/Spark/Hadoop_Security.md -->
      <div class="slide-wrapper">
        <div class="slide slide-17">
          <div class="inner">
            
            <header><h1>Configuring YARN for Long-running Applications (Hadoop 2.6.0)</h1></header>
            
            
            <section><ul>
<li><a href="http://www.cloudera.com/content/www/en-us/documentation/enterprise/5-3-x/topics/cm_sg_yarn_long_jobs.html">Configuring YARN for Long-running Applications</a></li>
<li><a href="https://issues.apache.org/jira/browse/YARN-2704">Yarn-2704  Localization and log-aggregation will fail if hdfs delegation token expired after token-max-life-time</a></li>
<li><a href="https://github.com/apache/hadoop/commit/a16d022ca4313a41425c8e97841c841a2d6f2f54?diff=split">Yarn-2704 Github</a></li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="src/slides/Spark/Hadoop_Security.md">src/slides/Spark/Hadoop_Security.md</a>
            </aside>
            
            <aside class="page_number">
              17/18
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: src/slides/Spark/Hadoop_Security.md -->
      <div class="slide-wrapper">
        <div class="slide slide-18">
          <div class="inner">
            
            <header><h1>Programming API</h1></header>
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="src/slides/Spark/Hadoop_Security.md">src/slides/Spark/Hadoop_Security.md</a>
            </aside>
            
            <aside class="page_number">
              18/18
            </aside>
          </footer>
        </div>
      </div>
      
    </div>
  </div>
  
  <div id="toc" class="sidebar hidden">
    <h2>Table of Contents</h2>
    <table>
      <caption>Table of Contents</caption>
      
      <tr id="toc-row-1">
        <th><a href="#slide1">Hadoop Security (Kerberos)</a></th>
        <td><a href="#slide1">1</a></td>
      </tr>
      
      
      <tr id="toc-row-2">
        <th><a href="#slide2">Hadoop Security (Kerberos)</a></th>
        <td><a href="#slide2">2</a></td>
      </tr>
      
      
      <tr id="toc-row-3">
        <th><a href="#slide3">Kerberos</a></th>
        <td><a href="#slide3">3</a></td>
      </tr>
      
      
      <tr id="toc-row-4">
        <th><a href="#slide4">Kerberos: The Network Authentication Protocol</a></th>
        <td><a href="#slide4">4</a></td>
      </tr>
      
      
      <tr id="toc-row-5">
        <th><a href="#slide5">-</a></th>
        <td><a href="#slide5">5</a></td>
      </tr>
      
      
      <tr id="toc-row-6">
        <th><a href="#slide6">Step 1: TGT Delivery</a></th>
        <td><a href="#slide6">6</a></td>
      </tr>
      
      
      <tr id="toc-row-7">
        <th><a href="#slide7">-</a></th>
        <td><a href="#slide7">7</a></td>
      </tr>
      
      
      <tr id="toc-row-8">
        <th><a href="#slide8">-</a></th>
        <td><a href="#slide8">8</a></td>
      </tr>
      
      
      <tr id="toc-row-9">
        <th><a href="#slide9">Hadoop HDFS Security</a></th>
        <td><a href="#slide9">9</a></td>
      </tr>
      
      
      <tr id="toc-row-10">
        <th><a href="#slide10">Hadoop</a></th>
        <td><a href="#slide10">10</a></td>
      </tr>
      
      
      <tr id="toc-row-11">
        <th><a href="#slide11">HDFS Delegation Token</a></th>
        <td><a href="#slide11">11</a></td>
      </tr>
      
      
      <tr id="toc-row-12">
        <th><a href="#slide12">Block Access Token</a></th>
        <td><a href="#slide12">12</a></td>
      </tr>
      
      
      <tr id="toc-row-13">
        <th><a href="#slide13">Spark Security</a></th>
        <td><a href="#slide13">13</a></td>
      </tr>
      
      
      <tr id="toc-row-14">
        <th><a href="#slide14">Spark Security (Old Design)</a></th>
        <td><a href="#slide14">14</a></td>
      </tr>
      
      
      <tr id="toc-row-15">
        <th><a href="#slide15">Spark Security (New Design)</a></th>
        <td><a href="#slide15">15</a></td>
      </tr>
      
      
      <tr id="toc-row-16">
        <th><a href="#slide16">Related Patches</a></th>
        <td><a href="#slide16">16</a></td>
      </tr>
      
      
      <tr id="toc-row-17">
        <th><a href="#slide17">Configuring YARN for Long-running Applications (Hadoop 2.6.0)</a></th>
        <td><a href="#slide17">17</a></td>
      </tr>
      
      
      <tr id="toc-row-18">
        <th><a href="#slide18">Programming API</a></th>
        <td><a href="#slide18">18</a></td>
      </tr>
      
      
    </table>
  </div>
  
  <div id="help" class="sidebar hidden">
    <h2>Help</h2>
    <table>
      <caption>Help</caption>
      <tr>
        <th>Table of Contents</th>
        <td>t</td>
      </tr>
      <tr>
        <th>Exposé</th>
        <td>ESC</td>
      </tr>
      <tr>
        <th>Full screen slides</th>
        <td>e</td>
      </tr>
      <tr>
        <th>Presenter View</th>
        <td>p</td>
      </tr>
      <tr>
        <th>Source Files</th>
        <td>s</td>
      </tr>
      <tr>
        <th>Slide Numbers</th>
        <td>n</td>
      </tr>
      <tr>
        <th>Toggle screen blanking</th>
        <td>b</td>
      </tr>
      <tr>
        <th>Show/hide slide context</th>
        <td>c</td>
      </tr>
      <tr>
        <th>Notes</th>
        <td>2</td>
      </tr>
      <tr>
        <th>Help</th>
        <td>h</td>
      </tr>
    </table>
  </div>
  <script>main()</script>
</body>
</html>